- name: Parse PFA PDFs → latest.json (always)
        run: |
          set -euo pipefail
          echo "[RUN] python - <<PY (run parser/main.py via runpy)"
          python - << 'PY'
import os, json, pathlib, runpy
print("[PY] CWD:", os.getcwd())
# Kør filen direkte for at undgå navnekonflikten med stdlib 'parser'
runpy.run_path("parser/main.py", run_name="__main__")
p = pathlib.Path("data/latest.json")
print("[PY] latest.json exists:", p.exists())
if p.exists():
    js = json.loads(p.read_text(encoding="utf-8"))
    print("[PY] funds count:", len(js.get("funds", [])))
else:
    print("[PY][WARN] latest.json missing (unexpected)")
PY
          echo "[RUN] parser.main finished"
